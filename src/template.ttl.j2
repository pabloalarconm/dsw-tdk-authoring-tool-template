{%- import "src/_mapping.json.j2" as map with context -%}
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix vcard: <http://www.w3.org/2006/vcard/ns#> .
@prefix ftr: <https://w3id.org/ftr#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix doap: <http://usefulinc.com/ns/doap#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dqv: <http://www.w3.org/ns/dqv#> .
@prefix vivo: <http://vivoweb.org/ontology/core#> .
@prefix dpv: <https://w3id.org/dpv#> .
@prefix sio: <http://semanticscience.org/resource/> .
@prefix adms: <http://www.w3.org/ns/adms#> .

{% if map.GeneralMap.Abbreviation %}<https://github.com/OSTrails/assessment-component-metadata-records/tree/main/{{map.GeneralMap.valuesTagMap.name}}/{{map.GeneralMap.Abbreviation}}.ttl> a {{ "ftr:Benchmark" if map.GeneralMap.valuesTagMap.name == "benchmark" else "dqv:Metric" if map.GeneralMap.valuesTagMap.name == "metric" else "ftr:Test" if map.GeneralMap.valuesTagMap.name == "test" else "ftr:Algorithm" if map.GeneralMap.valuesTagMap.name == "algorithm" else "dcat:DataService" }} ;{% endif %}
    {% if map.GeneralMap.Abbreviation %}dcterms:identifier "https://github.com/OSTrails/assessment-component-metadata-records/tree/main/{{map.GeneralMap.valuesTagMap.name}}/{{map.GeneralMap.Abbreviation}}.ttl"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.Title %}dcterms:title "{{map.GeneralMap.Title}}"^^xsd:string ;
    rdfs:label "{{map.GeneralMap.Abbreviation}}"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.Abbreviation %}vivo:abbreviation "{{map.GeneralMap.Abbreviation}}"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.Description %}dcterms:description """{{map.GeneralMap.Description}}"""^^xsd:string ;{% endif %}
    {% set keyword_labels = [] %}{% for key, value in map.GeneralMap.valuesKeywordMap.items() %}{% do keyword_labels.append('"' ~ value.label ~ '"^^xsd:string') %}{% endfor %}{% for key, value in map.GeneralMap.valuesKeywordManualMap.items() %}{% do keyword_labels.append('"' ~ value.label ~ '"^^xsd:string') %}{% endfor %}{% if keyword_labels %}dcat:keyword {{ keyword_labels | join(", ") }} ;{% endif %}
    {% set theme_objects = [] %}{% for key, value in map.GeneralMap.valuesThemeMap.items() %}{% do theme_objects.append('<' ~ value.iri ~ '>') %}{% endfor %}{% for key, value in map.GeneralMap.valuesThemeManualMap.items() %}{% do theme_objects.append('<' ~ value.iri ~ '>') %}{% endfor %}{% if theme_objects %}ftr:applicationArea {{ theme_objects | join(", ") }} ;{% endif %}
    {% set dimension_objects = [] %}{% for item in map.GeneralMap.valuesFAIRPrinciples + map.GeneralMap.valuesFAIRPrinciples4RS %}{% set doi = item.doi %}{% do dimension_objects.append(doi) %}{% endfor %}{% if dimension_objects %}ftr:inDimension {{ dimension_objects | join(", ") }} ;{% endif %}
    {% if map.GeneralMap.Version %}dcat:version "{{map.GeneralMap.Version}}"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.VersionNotes %}adms:versionNotes "{{map.GeneralMap.Abbreviation}}"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.License %}dcterms:license <{{map.GeneralMap.License}}> ;{% endif %}
    ftr:status "Active"@en ;
    {% if map.GeneralMap.LandingPage %}dcat:landingPage <{{map.GeneralMap.LandingPage}}> ;{% endif %}
    {% if map.GeneralMap.EndpointURL %}dcat:endpointURL <{{map.GeneralMap.EndpointURL}}> ;{% endif %}
    {% if map.GeneralMap.EndpointURLDescription %}dcat:endpointDescription <{{map.GeneralMap.EndpointURLDescription}}> ;{% endif %}
    {% if map.GeneralMap.Specification %}ftr:scoringFunction <{{map.GeneralMap.Specification}}> ;{% endif %}
    {% if map.GeneralMap.CodeRepository %}doap:repository <{{map.GeneralMap.CodeRepository}}> ;{% endif %}
    {% if map.GeneralMap.valuesToolMap %}ftr:supportedBy {% for key, value in map.GeneralMap.valuesToolMap.items() %} <{{value.url}}>{{ "," if not loop.last }}{{ ";" if loop.last }} {% endfor %}{% endif %}
    {% if map.GeneralMap.valuesDigitalObject %}dpv:IsApplicableFor {% for item in map.GeneralMap.valuesDigitalObject %}<{{ item.iri }}>{% if not loop.last %}, {% else %};{% endif %}{% endfor %}{% endif %}
    {% if map.GeneralMap.valuesOrganisationMap.items() %}{% for key, org in map.GeneralMap.valuesOrganisationMap.items() %}dcterms:creator <{{ org.url }}>; {% endfor %}{% endif %}
    {% for key, fac in map.GeneralMap.valuesFACMap.items() %}{%- if fac.test_URL and map.GeneralMap.valuesTagMap.name == "metric"-%}sio:SIO_000234 <{{ fac.test_URL }}> ;
    {% if not loop.last %}
  
    {% endif %}{% endif %}{% endfor %}
    {% for key, fac in map.GeneralMap.valuesFACMap.items() %}{%- if fac.benchmark_URL and map.GeneralMap.valuesTagMap.name == "metric"-%} ftr:hasBenchmark <{{ fac.benchmark_URL }}> ;
    {% if not loop.last %}
  
    {% endif %}{% endif %}{% endfor %}
    {% for key, fac in map.GeneralMap.valuesFACMap.items() %}{%- if fac.test_URL and fac.metric_id and map.GeneralMap.valuesTagMap.name == "benchmark"-%} ftr:hasAssociatedMetric <https://doi.org/{{ fac.metric_doi }}> ;{% if not loop.last %}
  
    {% endif %}{% endif %}{% endfor %}
    {% for key, fac in map.GeneralMap.valuesFACMap.items() %}{%- if fac.metric_id and map.GeneralMap.valuesTagMap.name == "test"-%} sio:SIO_000233 <https://doi.org/{{ fac.metric_doi }}> ;
    {% if not loop.last %}
  
    {% endif %}{% endif %}{% endfor %}
    {% if map.GeneralMap.valuesPositiveMap %}ftr:hasPositiveValidation{% for key, val in map.GeneralMap.valuesPositiveMap.items() %} <{{ val.iri }}>{{ "," if not loop.last }}{{ ";" if loop.last }} {% endfor %}{% endif %}
    {% if map.GeneralMap.valuesNegativeMap %}ftr:hasNegativeValidation{% for key, val in map.GeneralMap.valuesNegativeMap.items() %} <{{ val.iri }}>{{ "," if not loop.last }}{{ ";" if loop.last }} {% endfor %}{% endif %}
    {% if map.GeneralMap.valuesPersonMap %}dcat:contactPoint  {% for key, person in map.GeneralMap.valuesPersonMap.items() %}<https://orcid.org/{{person.person_orcid_code}}> {{ "," if not loop.last }} {{ "." if loop.last }} {% endfor %}{% endif %}

{% for key, org in map.GeneralMap.valuesOrganisationMap.items() %}
<{{ org.url }}> a vcard:Organisation ;
    vcard:organisation-name "{{ org.label | default("No name defined") }}"^^xsd:string .{% if not loop.last %}

  {% endif %}{% endfor %}
{% for key, person in map.GeneralMap.valuesPersonMap.items() %}{% if person.person_orcid_code %}
<https://orcid.org/{{person.person_orcid_code}}> a vcard:Individual ;
    vcard:fn "{{ person.person_orcid_name }}"^^xsd:string ;
    vcard:hasEmail <mailto:{{ person.person_email }}> .
    {% if not loop.last %}

  {% endif %}{% endif %}{% endfor %}

{% for key, fac in map.GeneralMap.valuesFACMap.items() %}
{% if fac.metric_id %}
<https://doi.org/{{ fac.metric_doi }}> a dqv:Metric ;
    rdfs:label "{{ fac.metric_name | default("No name defined") }}"^^xsd:string ;
{% if fac.test_URL %}
    sio:SIO_000234 <{{ fac.test_URL }}> ;
{% endif %}
    dcterms:identifier "{{ fac.metric_doi }}"^^xsd:string .

{% endif %}
{% endfor %}
{% for key, fac in map.GeneralMap.valuesFACMap.items() %}{%- if fac.test_URL -%}<{{ fac.test_URL}}> a ftr:Test, dcat:DataService .    
{% if not loop.last %}

{% endif %}{% endif %}{% endfor %}
{% for key, fac in map.GeneralMap.valuesFACMap.items() %}{%- if fac.benchmark_URL -%}<{{ fac.benchmark_URL}}> a ftr:Benchmark .
{% if not loop.last %}

{% endif %}{% endif %}{% endfor %}
{% if map.GeneralMap.Specification %}<{{map.GeneralMap.Specification}}> a sio:SIO_000090 .{% endif %}

{#{{ map.GeneralMap | default({}) |tojson(4) }}#}